
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Thing Demo</title>
    <link href="reset.css" rel="stylesheet">
    <style>
      #demo {
        border: 1px dashed #ccc;
        /*height: 400px;*/
        position: relative;
      }

      /* Lines can be styled with normal css: */
      div.Line {
        height: 5px; /* Line width of 3 */
        background: #948C79; /* Black fill */
        opacity: 0.5;
        box-shadow: 0 0 8px #B99B7E;
        transition: transform 1s;
      }

      div.Line:hover {
        background: #C30;
        box-shadow: 0 0 8px #C30;
        opacity: 1;
      }

      div.Line.active {
        background: #666;
        box-shadow: 0 0 8px #666;
        opacity: 1;
      }

      .Thing {
        border-color: #F00;
      }
    </style>
  </head>

  <body>

  <div id="page">
    <div id='content'>
      <div id='controls'>
        <a href='#' id='rotate-lines'>Rotate Lines</a>
        | <a href='#' id='rotate-arrows'>Rotate Arrows</a>
      </div>
    </div>
  </div>

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
<!-- <script src='jquery/jquery-1.9.1.js'></script> -->
<script src='jquery/jquery.min.js'></script>
<script src='thing.js'></script>

<script>
$(function(){
  var x1 = null, y1 = null;

  $('#rotate-lines').click(function(event){
    event.preventDefault();
    rotateLineThings();
  });

  $('#rotate-arrows').click(function(event){
    event.preventDefault();
    rotateArrowThings();
  });

  function rotateArrowThings() {
    var degrees = (Math.random() * 360) - 180;   // +- 180
    for (var i=0; i < arrows.length; i++) {
      arrows[i].rotate(degrees);
    }
  }

  function rotateLineThings() {
    var degrees = (Math.random() * 360) - 180;   // +- 180
    for (var i=0; i < funboxItems.length; i++) {
      funboxItems[i].rotate(degrees);
    }
  }

  function makeDemoBox (props) {
    let defaultProps = {
      display: 'inline-block',
      position: 'relative',
      margin: '20px',
      width: '200px',
      height: '200px',
      border: '2px dashed #eee'
    };
    props = $.extend({}, defaultProps, props);
    return Thing.classes.Box.make(props);
  }

  //---------------------------------------------------------

  var arrows = [];
  var Box = Thing.classes.Box;
  var Arrow = Thing.classes.Arrow;
  var Img = Thing.classes.Img;

  function makeBoxOfArrows () {
    makeDemoBox({
      position:'relative',
      maxWidth:'1240px', minWidth:'500px',
      width: 'auto', height:'auto'
    })
    .add( makeTenBoxes() )
    .each( box => {box.add(makeRandomArrow())} )
    .render();
  }

  //---------------------------------------------------------

  window.funboxItems = [];

  class FunBox extends Box {
    init (props) {
      props = $.extend({
        position: 'relative',
        border: '2px solid #ddd',
        borderRadius: '6px',
        margin: '10px',
        maxWidth:'1240px',
        minWidth:'500px',
        width: 'auto', height:'auto'
      }, props);

      super.init(props);
      this.type = 'FunBox';
      this.$element = Thing.makeElement(this.html(), this.props, this.type);
    }
  }

  //---------------------------------------------------------

  function makeRandomArrow() {
    let a = Thing.classes.Arrow.make({
      rotate: {z: (Math.random()*360)},
      scale: .2 + (Math.random()*4),
      x: (Math.random()*200),
      y: (Math.random()*200),
      color: ["red", "yellow", "green", "blue"][parseInt(Math.random()*4)]
    });
    arrows.push(a);
    return a;
  }

  function makeTenBoxes() {
    let boxes = [];
    for (var i=0; i < 10; i++) {
      boxes.push(makeDemoBox({
        overflow:'hidden',
        borderColor: '#ccc',
        position: 'relative'
      }));
    }
    return boxes;
  }

  function makeTenLines() {
    let lines = [];
    for (var j=0; j < 10; j++) {
      var a = Thing.classes.Line.make({
        x1: (Math.random()*100),
        y1: (Math.random()*200),
        x2: (100 + Math.random()*100),
        y2: (Math.random()*200),
        width: parseInt(1 + (Math.random()*3), 10),
        opacity: .1 + (Math.random()*.9)
      });
      funboxItems.push(a);
      lines.push(a);
    }
    return lines;
  }

  makeBoxOfArrows();

  var FB = FunBox.make();
  FB.add(makeTenBoxes());
  FB.each( box => { box.add(makeTenLines()) } );
  FB.render();

  window.FB = FB;
  window.Img = Img;
});
</script>

  </body>
</html>
