<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Composite Image Demo</title>
    <link href="reset.css" rel="stylesheet">
  </head>

  <body>

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
<!-- <script src='jquery/jquery-1.9.1.js'></script> -->
<script src='jquery/jquery.min.js'></script>
<script src='thing.js'></script>

<script>
$(function(){
  let Rand = Thing.classes.Rand;

  function makeHeader (props) {
    return Thing.classes.Label.make($.extend({}, {
      padding: '25px 0px 0px 10px',
      fontSize: '32px',
      fontWeight: 'bold',
      position: 'relative',
    }, props));
  }

  function makeLabel (props) {
    return Thing.classes.Label.make($.extend({
      padding: '5px',
      zIndex: 100,
      width: '100%',
      backgroundColor: 'rgba(255,255,255,1)',
    }, props));
  }

  function makeDemoBox (props) {
    return Thing.classes.Box.make($.extend({
        display: 'inline-block',
        position: 'relative',
        margin: '20px',
        width: '300px',
        height: '200px',
        overflow: 'hidden',
        border: '1px dotted #ccc',
        backgroundColor: '#fff'
      }, props));
  }

  function makeCompositeImg (props) {
    return Thing.classes.CompositeImg.make($.extend({}, {
      w: 300,
      h: 200,
    }, props));
  }


  function makeDemoBoxes() {
    return [
      makeHeader({text: "CompositeImg Demo"}),
      makeHeader({text: "Below we'll blend two images: multi-colored dots and 4 bands (white, 66%, 33%, black)", fontSize: '18px'}),

      makeDemoBox().add([
        makeLabel({ text: "One layer, multi-colored dots, no blending" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "One layer, white-black bands, no blending" }),
        makeCompositeImg({
          layers: [
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #a8a8a8 25%, #a8a8a8 50%, #545454 50%, #545454 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({text: "Normal blending"}),

      makeDemoBox().add([
        makeLabel({ text: "Normal" }),
        makeCompositeImg({
          backgroundColor: '#0000f0',
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({text: "Darker Modes"}),

      makeDemoBox().add([
        makeLabel({ text: "Darken" }),
        makeCompositeImg({
          backgroundColor: '#0000f0',
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'darken' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Multiply" }),
        makeCompositeImg({
          backgroundColor: '#0000f0',
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'multiply' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Color-burn" }),
        makeCompositeImg({
          backgroundColor: '#0000f0',
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'color-burn' },
          ]
        }),
      ]),

      makeHeader({text: "Lighter Modes"}),

      makeDemoBox().add([
        makeLabel({ text: "Lighten" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'lighten' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Screen" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'screen' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Color-dodge" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'color-dodge' },
          ]
        }),
      ]),

      makeHeader({text: "Contrast Modes"}),

      makeDemoBox().add([
        makeLabel({ text: "Overlay" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'overlay' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Hard-light" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'hard-light' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Soft-light" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'soft-light' },
          ]
        }),
      ]),

      makeHeader({text: "Inversion Modes"}),

      makeDemoBox().add([
        makeLabel({ text: "Exclusion" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'exclusion' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "Difference" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'difference' },
          ]
        }),
      ]),

      makeHeader({text: "Component Modes"}),

      makeHeader({text: "Luminosity blends with luminance of layer", fontSize: '18px'}),
      makeDemoBox().add([
        makeLabel({ text: "Luminosity" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'luminosity' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "blend layer contains luminance" }),
        makeCompositeImg({
          layers: [
            { image: 'linear-gradient(90deg, #fff 0%, #fff 25%, #aaaaaa 25%, #aaaaaa 50%, #555555 50%, #555555 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({text: "Hue blends with hue of layer", fontSize: '18px'}),
      makeDemoBox().add([
        makeLabel({ text: "Hue" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #f00 0%, #f00 25%, #0f0 25%, #0f0 50%, #00f 50%, #00f 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'hue' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "blend layer contains hues" }),
        makeCompositeImg({
          layers: [
            { image: 'linear-gradient(90deg, #f00 0%, #f00 25%, #0f0 25%, #0f0 50%, #00f 50%, #00f 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({text: "Saturation blends with saturation of layer", fontSize: '18px'}),
      makeDemoBox().add([
        makeLabel({ text: "Saturation" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 25%, rgb(255, 170, 170) 25%, rgb(255, 170, 170) 50%, rgb(255, 85, 85) 50%, rgb(255, 85, 85) 75%, rgb(255, 0, 0) 75%, rgb(255, 0, 0) 100%)',
              size: '100% 80%',
              blendMode: 'saturation' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "blend layer contains saturations" }),
        makeCompositeImg({
          layers: [
            { image: 'linear-gradient(90deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 25%, rgb(255, 170, 170) 25%, rgb(255, 170, 170) 50%, rgb(255, 85, 85) 50%, rgb(255, 85, 85) 75%, rgb(255, 0, 0) 75%, rgb(255, 0, 0) 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({ text: "Color blends with color of layer", fontSize: '18px' }),
      makeDemoBox().add([
        makeLabel({ text: "Color" }),
        makeCompositeImg({
          layers: [
            { image: 'radial-gradient(rgb(255, 252, 36) 10%, rgb(51, 255, 169) 30%, rgb(159, 0, 51) 100%)',
              size: '15% 22%',
              repeat: 'repeat',
              blendMode: 'normal' },
            { image: 'linear-gradient(90deg, #f00 0%, #f00 25%, #0f0 25%, #0f0 50%, #00f 50%, #00f 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'hue' },
          ]
        }),
      ]),
      makeDemoBox().add([
        makeLabel({ text: "blend layer contains colors" }),
        makeCompositeImg({
          layers: [
            { image: 'linear-gradient(90deg, #f00 0%, #f00 25%, #0f0 25%, #0f0 50%, #00f 50%, #00f 75%, #000 75%, #000 100%)',
              size: '100% 80%',
              blendMode: 'normal' },
          ]
        }),
      ]),

      makeHeader({ text: "Multiple layers and effects" }),

      Thing.classes.CompositeImg.make({
        position: 'relative',
        display: 'inline-block',
        backgroundColor: '#06d',
        margin: '20px',
        w: 300,
        h: 600,
        layers: [
          { image: 'url(img/rubens_adonis_leg_right.png)',
            blendMode: 'luminosity',
            size: '30px 60px',
            repeat: 'repeat'
          },
          { image: 'url(img/leg_durer_right_1.png)',
            blendMode: 'color-dodge'
          },
          { image: 'url(img/rubens_venus_leg_left.png)',
            blendMode: 'darken'
          },
        ]
      }),

      Thing.classes.CompositeImg.make({
        position: 'relative',
        display: 'inline-block',
        backgroundColor: 'rgb(0, 221, 8)',
        margin: '20px',
        w: 300,
        h: 600,
        layers: [
          { image: 'url(img/leg_durer_right_1.png)',
            blendMode: 'hue'
          },
          { image: 'url(img/leg_durer_right_1.png)',
            size: '90% 98%',
            position: '15px 15px',
            blendMode: 'luminosity'
          },
        ]
      }),

      Thing.classes.Box.make({
        position: 'relative',
        display: 'inline-block',
        margin: '20px',
        backgroundColor: 'green',
        w: 300,
        h: 600,
      }).add([
        Thing.classes.CompositeImg.make({
          backgroundColor: 'pink',
          w: 300,
          h: 600,
          layers: [
            { image: 'url(img/leg_durer_right_1.png)',
              blendMode: 'color-burn',
              size: '50px 120px',
              position: '50px 50px',
              repeat: 'repeat'
            },
          ]
        }),
        Thing.classes.CompositeImg.make({
          backgroundColor: '#06d',
          w: 300,
          h: 600,
          layers: [
            { image: 'url(img/leg_durer_right_1.png)',
              blendMode: 'exclusion',  // luminosity
              size: '50px 120px',
              position: '50px 50px',
              repeat: 'repeat'
            },
          ]
        })
        .css({
          WebkitMaskImage: 'radial-gradient(rgb(251, 90, 30) 0%, rgb(51, 255, 169) 50%, transparent 51%)',
          WebkitMaskRepeat: 'repeat',
          WebkitMaskSize: '75px 75px',
          WebkitMaskPosition: '0% 0%'
        }),
      ]),

    ];
  }

  // Render demos
  makeDemoBox({
      width: '1050px',
      height: 'auto',
      border: 'none'
  })
  .add(makeDemoBoxes())
  .render();

  // Reference image link
  Thing.classes.Label.make({
    position: 'relative',
    margin: '10px',
    text: '<a href="CompositeImg_demo_page.png" target="blank">Reference:<br><img src="CompositeImg_demo_page.png" width="100px"></a>',
    html: true
  }).render();

});
</script>

  </body>
</html>
